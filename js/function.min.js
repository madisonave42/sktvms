var HEADER_HEIGHT=160,DASHBOARD_MIN_HEIGHT=756,popHide=function(){$(".dimmed").removeClass("on"),$(".popup").removeClass("on")},popAlert=function(a){$(".dimmed").addClass("on"),$(".popup.alert").addClass("on").trigger("loadPopup"),$(".popup-msg-text").text(a)},popAddPage=function(){$(".dimmed").addClass("on"),$(".popup.add-page").addClass("on").trigger("loadPopup"),$(".js-page-title").val("").focus()},popDelete=function(a){$(".dimmed").addClass("on"),$(".popup.delete-page").addClass("on").trigger("loadPopup"),$(".js-tab-title").text(a)},popAddGraph=function(){$(".dimmed").addClass("on"),$(".popup.add-graph").addClass("on").trigger("loadPopup"),$(".select").selectric(),$(".spinner").spinner({max:4,min:1})},tabItem=function(a){var b='<li class="tab-item js-tab current">';return b+='<div class="tab-item-title">'+a+"</div>",b+='<button type="button" class="btn-del js-del">delete</button>',b+="</li>"},pageItem=function(a){var b='<section class="contents-section stats-monitoring current">';return b+='<div class="contents-section-inner stats-monitoring fill-gray">',b+='<ul class="container-list">',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+='<li class="container-item"></li>',b+="</ul>",b+='<ul class="graph-list page'+a+'">',b+="</ul>",b+="</div>",b+="</section>"},graphItemNode=function(a,b){var c='<div class="graph-item '+a+'"><div class="graph-top"><div class="graph-title">'+b+'</div><div class="graph-btn-group"><button type="button" class="graph-btn setting"></button><button type="button" class="graph-btn enlarge"></button><button type="button" class="graph-btn close">close</button></div></div><div class="graph-content"></div></div>';return c},enlargeGraphItem=function(a){var b='<div class="enlarge-graph-item"><div class="enlarge-graph-top"><div class="enlarge-graph-title">'+a+'</div><div class="enlarge-graph-btn-group"><button type="button" class="enlarge-graph-btn close">close</button></div></div><div class="enlarge-graph-content"></div></div>';return b},ResizeDiv=function(a,b,c){var d=$(window).outerHeight()-HEADER_HEIGHT;b.css({height:d/2-23}),c.css({height:d/2-23});var e=b.height(),f=$(window).outerHeight()-HEADER_HEIGHT,g=$(window).outerHeight()-HEADER_HEIGHT,h=0,i=100,j=d-(i+44),k=function(a){return g=f,f=a,h=g-f},l=function(){j=d-(i+44),d=$(window).outerHeight()-HEADER_HEIGHT,245>d&&(d=245),$(".main-content .wrapper.fix-height").css({height:d});var a=k(d);i>e?e=i:e>j?e=j:e-=a/2,b.css({height:e});var f=b.outerHeight(),g=d-f-24;c.css({height:g}),b.resizable({maxHeight:j})};b.resizable({handles:"s",minHeight:i,maxHeight:j,resize:function(){var a=b.outerHeight(),e=d-a-24;c.css({height:e})},stop:function(a,b){$(".ui-resizable-handle").trigger("mouseup"),e=b.size.height}}),this.resizeDivFitWin=function(){l()}},FoldTree=function(){this.foldAction=function(a,b,c,d){d?"false"==b.data("select")?(a.attr("data-select","selected").addClass("is-select").siblings().attr("data-select","selected").addClass("is-select"),b.data("select","true")):(a.removeAttr("data-select").removeClass("is-select").siblings().removeAttr("data-select").removeClass("is-select"),b.data("select","false")):"true"==b.data("fold")?(a.addClass("unfold").siblings().addClass("unfold"),b.data("fold","false").next(".tree-depth").addClass("unfold")):(a.removeClass("unfold").siblings().removeClass("unfold"),b.data("fold","true").next(".tree-depth").removeClass("unfold"))}},ResizeDashboardList=function(a,b){var c=628,d=$(window).outerHeight()-HEADER_HEIGHT,e=d-c;b.data("expand","false"),a.css({height:e});var f=function(){d=$(window).outerHeight()-HEADER_HEIGHT,DASHBOARD_MIN_HEIGHT>d&&(d=DASHBOARD_MIN_HEIGHT),a.css({height:d-22}),b.data("expand","true")},g=function(){d=$(window).outerHeight()-HEADER_HEIGHT,e=d-c,a.css({height:e}),b.data("expand","false")},h=function(){"false"==b.data("expand")?g():f()};this.resizeDashboardListFitWin=function(){h()},this.expandDashboardListHeight=function(){b.addClass("expand"),f()},this.reduceDashboardListHeight=function(){b.removeClass("expand"),g()}},initTab=function(a){var b=a.find(".js-tab-link"),c=a.find(".js-tab-cont");return 0==b.length?!1:(b.each(function(){$(this).data("target",$(this).attr("href"))}),void b.on("click",function(a){b.removeClass("on"),c.removeClass("on"),$(this).addClass("on"),$($(this).data("target")).addClass("on"),a.preventDefault()}))},initPie=function(a,b){new Chartist.Pie(a,{series:[b,100-b]},{startAngle:0,total:100,showLabel:!1})},smTab=function(){var a="",b=0,c=function(a,b){var c=a.find(".tab-item").length;return"add"==b?10>c:c>0},d=function(){var a=$(".tab-item"),b=$(".contents-section.stats-monitoring");a.hasClass("current")||(a.eq(0).addClass("current"),b.eq(1).addClass("current"))};this.showPopup=function(b,d,e){"add"==d?c(b,d)?popAddPage():popAlert("페이지는 10개까지 추가 할 수 있습니다."):c(b,d)?(a=e,popDelete(e.prev(".tab-item-title").text())):popAlert("삭제할 페이지가 없습니다.")},this.addPage=function(a,c,d){b++,a.find(".tab-item").removeClass("current"),d.find(".contents-section.stats-monitoring").removeClass("current"),a.append(tabItem(c)),d.append(pageItem(b)),popHide(),$(window).trigger("addPage")},this.delPage=function(){var b=$(".tab-item"),c=$(".contents-section.stats-monitoring"),e=a.parents(".tab-item"),f=b.index(e)+1;e.remove(),c.eq(f).remove(),popHide(),d()},this.active=function(a){var b=$(".tab-item").index(a)+1;a.addClass("current").siblings().removeClass("current"),$(".contents-section.stats-monitoring").eq(b).addClass("current").siblings().removeClass("current")},this.tabMove=function(a,b,c,d){"prev"==a&&d>0?(b.eq(d).insertBefore(b.eq(d-1)),c.eq(d+1).insertBefore(c.eq(d))):"next"==a&&d<b.length&&(b.eq(d).insertAfter(b.eq(d+1)),c.eq(d+1).insertAfter(c.eq(d+2)))}},ResizeContainer=function(a){var b=function(){var b=$(window).outerHeight()-HEADER_HEIGHT;a.css({height:(b-68)/4})};b(),this.resizeContainerFitWin=function(){b()}},ResizeGraph=function(){var a=function(){var a=$(window).outerHeight()-HEADER_HEIGHT;$(".graph-item").css({height:(a-68)/4}),$(".graph-item.m1x1").css({height:(a-68)/4}),$(".graph-item.m1x2").css({height:(a-68)/4*2+6}),$(".graph-item.m2x1").css({height:(a-68)/4}),$(".graph-item.m2x2").css({height:(a-68)/4*2+6}),$(".graph-item.m1x3").css({height:(a-68)/4*3+12}),$(".graph-item.m3x1").css({height:(a-68)/4}),$(".graph-item.m2x3").css({height:(a-68)/4*3+12}),$(".graph-item.m3x2").css({height:(a-68)/4*2+6}),$(".graph-item.m3x3").css({height:(a-68)/4*3+12}),$(".graph-item.m1x4").css({height:(a-68)/4*4+18}),$(".graph-item.m4x1").css({height:(a-68)/4}),$(".graph-item.m2x4").css({height:(a-68)/4*4+18}),$(".graph-item.m4x2").css({height:(a-68)/4*2+6}),$(".graph-item.m3x4").css({height:(a-68)/4*4+18}),$(".graph-item.m4x3").css({height:(a-68)/4*3+12}),$(".graph-item.m4x4").css({height:(a-68)/4*4+18})},b=function(){$(".graph-item").each(function(){var a=4*$(this).attr("data-floor"),b=$(".container-item").eq(0).offset().top,c=$(".container-item").eq(a).offset().top-b;$(this).css({top:c})})};a(),this.resizeGraphContainer=function(){a(),b()}},Graph=function(){var a,b,c=function(a,b,c,d,e,f,g){var h=f.top-g.top,i=f.left-g.left;a.data({top:h,left:i,graphTitle:b,index:c,gridCol:d,gridRow:e}).draggable({snap:".container-item",snapMode:"inner"}).css({position:"absolute",top:h,left:i}),$(".container-item").droppable()};this.showPopup=function(c,d){a=c,b=d;var e=b.find(".container-item").index(a);popAddGraph(),$(".stats-map-item-state").eq(e).addClass("active"),$(".js-btn-add-graph").addClass("new"),$(".popup-graph-title").val("").focus()},this.addGraph=function(d,e,f){var g,h=$(".contents-section-inner.stats-monitoring").index(b),i=b.find(".container-item").index(a),j=b.find(".container-item").eq(0).offset(),k=a.offset(),l="m"+e+"x"+f,m=$(graphItemNode(l,d));0>i-4?g=0:4>i-4?g=1:8>i-4?g=2:12>i-4&&(g=3),m.attr("data-floor",g).appendTo($(".graph-list.page"+h)),c(m,d,i,e,f,k,j),popHide(),$(window).trigger("addGraph")}},SetGraph=function(){var a;this.showSetPopup=function(b,c,d,e,f){a=b,popAddGraph(),$(".popup-graph-title").val(c).focus(),$(".spinner.col").val(e),$(".spinner.row").val(f),$(".stats-map-item-state").eq(d).addClass("active"),$(".js-btn-add-graph").addClass("change")},this.changeGraph=function(b,c,d){var e="m"+c+"x"+d;a.find(".graph-title").val(b);for(var f=1;4>=f;f++)for(var g=1;4>=g;g++){var h="m"+f+"x"+g;a.removeClass(h)}a.addClass(e).data({graphTitle:b,gridCol:c,gridRow:d}).draggable({snap:".container-item",snapMode:"inner"}),popHide(),$(window).trigger("addGraph")}},EnlargeGraph=function(a,b){a.append(enlargeGraphItem(b))};navigator.userAgent.indexOf("Safari")>0?$("html").addClass(navigator.userAgent.indexOf("Chrome")>0?"chrome":"Safari"):navigator.userAgent.indexOf("Firefox")>0?$("html").addClass("firefox"):navigator.userAgent.indexOf("Trident/7.0")>0?$("html").addClass("ie11"):navigator.userAgent.indexOf("MSIE 10.0")>0&&$("html").addClass("ie10"),$(function(){!function(){var a=$(window).outerHeight()-HEADER_HEIGHT,b=$(".main-content .wrapper.fix-height"),c=$(".main-content .wrapper.var-height");b.css({height:a}),c.height()<=a&&c.css({height:a})}(),function(){$(".header-user-path").data("open","false").on("click",function(a){a.preventDefault(),"false"==$(this).data("open")?$(this).data("open","true").addClass("on").next().addClass("on"):$(this).data("open","false").removeClass("on").next().removeClass("on")})}(),$(".select").selectric(),$(".spinner").spinner({max:4,min:1}),function(){var a=$(".tree-item");a.data({fold:"true",select:"false"});var b=new FoldTree;$(document).on("click",".js-fold",function(a){a.preventDefault();var c=$(this).parent(".tree-item"),d=c.parent(".tree-list"),e=d.hasClass("no-children");b.foldAction($(this),c,d,e)})}(),function(){$(".js-cal-start, .js-cal-end").datepicker({dateFormat:"yy-mm-dd",beforeShowDay:function(a){var b="";return 6==a.getDay()&&(b="ui-datepicker-sat"),0==a.getDay()&&(b="ui-datepicker-sun"),[!0,b]}}),$(".js-btn-cal-start").on("click",function(){$(".js-cal-start").datepicker("show")}),$(".js-btn-cal-end").on("click",function(){$(".js-cal-end").datepicker("show")})}(),function(){var a=$("body"),b=new Graph;a.on("click",".container-item",function(){b.showPopup($(this),$(this).parents(".contents-section-inner.stats-monitoring"))}),a.on("click",".js-btn-add-graph.new",function(){var a=$(".popup-graph-title").val(),c=$(".spinner.col").val(),d=$(".spinner.row").val();b.addGraph(a,c,d)})}(),function(){var a=$(".sm-tab .tab-list"),b=$(".wrapper.monitoring"),c=new smTab,d=$("body");d.on("click",".js-add",function(){c.showPopup(a,"add")}),d.on("click",".js-del",function(){c.showPopup(a,"del",$(this))}),d.on("click",".js-btn-add-page",function(){var d=$(".js-page-title").val();c.addPage(a,d,b)}),d.on("click",".js-btn-del-page",function(){c.delPage()}),d.on("click",".js-tab",function(){c.active($(this))}),$(".btn-move-prev").on("click",function(){var a=$(".tab-item"),b=$(".contents-section.stats-monitoring"),d=a.index($(".tab-item.current"));c.tabMove("prev",a,b,d)}),$(".btn-move-next").on("click",function(){var a=$(".tab-item"),b=$(".contents-section.stats-monitoring"),d=a.index($(".tab-item.current"));c.tabMove("next",a,b,d)})}(),function(){var a,b=new ResizeContainer($(".container-item"));$(window).on("addPage addGraph",function(){b=new ResizeContainer($(".container-item")),a=new ResizeGraph($(".graph-item"))}),$(window).on("resize",function(){try{b.resizeContainerFitWin(),a.resizeGraphContainer()}catch(c){}})}(),function(){var a=$("body"),b=new SetGraph;a.on("click",".graph-btn.setting",function(){var a=$(this).parents(".graph-item"),c=a.data("graphTitle"),d=a.data("index"),e=a.data("gridCol"),f=a.data("gridRow");b.showSetPopup(a,c,d,e,f)}),a.on("click",".js-btn-add-graph.change",function(){var a=$(".popup-graph-title").val(),c=$(".spinner.col").val(),d=$(".spinner.row").val();b.changeGraph(a,c,d)}),a.on("click",".graph-btn.enlarge",function(){{var a=$(this).parents(".graph-top").find(".graph-title").text();new EnlargeGraph($(this).parents(".contents-section-inner.stats-monitoring"),a)}}),a.on("click",".graph-btn.close",function(){$(this).parents(".graph-item").remove()})}(),function(){var a=$("body");a.on("click",".enlarge-graph-btn.close",function(){$(this).parents(".enlarge-graph-item").remove()})}(),function(){var a=$(".js-expand"),b=new ResizeDashboardList($(".dashboard-list"),a);$(window).on("resize",function(){try{b.resizeDashboardListFitWin()}catch(a){}}),a.on("click",function(){"false"==$(this).data("expand")?b.expandDashboardListHeight():b.reduceDashboardListHeight()})}(),function(){initTab($(".dashboard-list")),initTab($(".dbpopup"))}(),function(){$(".js-open-vnf-manager").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-vnf-manager-popup").addClass("on"),a.preventDefault()}),$(".js-open-vim").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-vim-popup").addClass("on"),a.preventDefault()}),$(".js-open-nfvi").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-nfvi-popup").addClass("on"),a.preventDefault()}),$(".js-open-vnf-instance").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-vnf-instance-popup").addClass("on"),a.preventDefault()}),$(".js-open-graph-cpu").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-graph-cpu-popup").addClass("on"),a.preventDefault()}),$(".js-open-graph-mem").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-graph-mem-popup").addClass("on"),a.preventDefault()}),$(".js-open-graph-disk").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-graph-disk-popup").addClass("on"),a.preventDefault()}),$(".js-open-graph-net").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-graph-net-popup").addClass("on"),a.preventDefault()}),$(".js-open-overload-cpu").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-overload-cpu-popup").addClass("on"),a.preventDefault()}),$(".js-open-overload-mem").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-overload-mem-popup").addClass("on"),a.preventDefault()}),$(".js-open-overload-disk").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-overload-disk-popup").addClass("on"),a.preventDefault()}),$(".js-open-overload-net").on("click",function(a){$(".dbpopup").removeClass("on"),$(".js-overload-net-popup").addClass("on"),a.preventDefault()}),$(".dbpopup-close").on("click",function(a){$(".dbpopup").removeClass("on"),a.preventDefault()})}(),function(){$(".js-btn-overload-item").on("click",function(){$(this).toggleClass("on")})}(),function(){$(".js-pie-chart").each(function(){var a=$(this).find(".dbpopup-circle-chart-bar")[0],b=parseInt($(this).find(".dbpopup-circle-chart-text").text(),10);initPie(a,b)})}(),function(){initTab($(".state-list"))}(),function(){var a=$(".js-vnf-host-pannel input"),b=$(".vnf-host-list");a.on("change",function(){var c=a.filter(":checked").attr("value");b.removeClass("on"),$("#"+c).addClass("on")}),$(window).on("load",function(){a.trigger("change")})}(),function(){var a=$(".wrapper.fix-height"),b=new ResizeDiv(a,$(".stats-resizable.narrow.top"),$(".stats-resizable.narrow.bottom")),c=new ResizeDiv(a,$(".stats-resizable.wide.top"),$(".stats-resizable.wide.bottom"));$(window).on("resize",function(){try{b.resizeDivFitWin(),c.resizeDivFitWin()}catch(a){}}),$(".ui-resizable-handle").on({mousedown:function(){$(window).unbind("resize")},mouseup:function(){$(window).bind("resize",b.resizeDivFitWin),$(window).bind("resize",c.resizeDivFitWin)}})}(),function(){$(".chart-view").data("select","false").on("click",function(a){a.preventDefault(),"false"==$(this).data("select")?$(this).addClass("on").data("select","true"):$(this).removeClass("on").data("select","false")})}(),function(){$(".selectric-date-type").on("change",function(){var a=$(this).find("option").index($(this).find("option:selected"));$(".period-type").addClass("hide"),$(".select-type").addClass("hide"),$(".period-type").eq(a).removeClass("hide"),$(".select-type").eq(a).removeClass("hide")})}(),function(){$(".spinner-year").spinner()}(),function(){$(".js-pie-chart").each(function(){var a=$(this).find(".vim-circle-chart-bar")[0],b=parseInt($(this).find(".vim-circle-chart-text").text(),10);initPie(a,b)})}(),function(){$(".setting-list-item").data("selected","false").on("click",function(){$(this).hasClass("selected")&&$(this).data("selected","true"),"false"==$(this).data("selected")?($(".setting-list-item").data("selected","false").removeClass("selected"),$(this).addClass("selected").data("selected","true")):$(this).removeClass("selected").data("selected","false")})}(),function(){$(".btn-nav-fold.setting").data("fold","false").on("click",function(){"false"==$(this).data("fold")?($(this).parents(".setting-nav-top").addClass("fold").next(".setting-nav-content").addClass("fold"),$(this).data("fold","true")):($(this).parents(".setting-nav-top").removeClass("fold").next(".setting-nav-content").removeClass("fold"),$(this).data("fold","false"))})}(),function(){$("body").on("click",".js-open-popup",function(a){$(".dimmed").addClass("on"),$(".popup").addClass("on").trigger("loadPopup"),a.preventDefault()}),$("body").on("click",".js-close-popup",function(a){$(".dimmed").removeClass("on"),$(".popup").removeClass("on"),a.preventDefault()}),$("body").on("click",".js-close-alert",function(a){$(".dimmed").removeClass("on"),$(".popup").removeClass("on"),a.preventDefault()}),$("body").on("click",".js-confirm-ok",function(a){$(".dimmed").removeClass("on"),$(".popup").removeClass("on"),a.preventDefault()}),$("body").on("click",".js-confirm-cancel",function(a){$(".dimmed").removeClass("on"),$(".popup").removeClass("on"),a.preventDefault()})}(),function(){initTab($(".js-popup-tab"))}()});