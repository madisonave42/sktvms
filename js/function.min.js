var HEADER_HEIGHT=160,DASHBOARD_MIN_HEIGHT=756,popAlert=function(a){var b='<div class="dimmed on"></div>';return b+='<section class="popup popup-small-width on">',b+=' <div class="popup-content">',b+='   <div class="popup-content-section">',b+='     <div class="popup-input-wrap">',b+='       <div class="popup-msg">',b+='         <div class="popup-msg-icon left-float">',b+='           <img src="../../images/popup/ico_caution.png" alt="실패">',b+="         </div>",b+='         <div class="popup-msg-text left-float">'+a+"</div>",b+="       </div>",b+="     </div>",b+="   </div>",b+=" </div>",b+=' <div class="popup-bottom">',b+='   <div class="right-float">',b+='     <button type="button" class="js-close-alert btn-stroke-orange left-float left">확인</button>',b+="   </div>",b+=" </div>",b+="</section>"},popAdd=function(){var a='<div class="dimmed on"></div>';return a+='<section class="popup popup-small-width on">',a+='<h1 class="popup-heading">Statistics Monitoring > 페이지 추가</h1>',a+=' <div class="popup-content">',a+='   <div class="popup-content-section">',a+='     <div class="popup-input-wrap">',a+='       <label class="popup-label width-small left-float">페이지명 :</label>',a+='       <input type="text" class="input-form left-float js-page-title" />',a+="     </div>",a+="   </div>",a+=" </div>",a+=' <div class="popup-bottom">',a+='   <div class="right-float">',a+='     <button type="button" class="btn-stroke-orange left-float left js-btn-add-page">추가</button>',a+='     <button type="button" class="btn-stroke-dark left-float left js-close-popup">취소</button>',a+="   </div>",a+=" </div>",a+="</section>"},popDelete=function(a){var b='<div class="dimmed on"></div>';return b+='<section class="popup popup-small-width on">',b+=' <h1 class="popup-heading">Statistics Monitoring > 페이지 삭제</h1>',b+=' <div class="popup-content">',b+='   <div class="popup-content-section">',b+='     <div class="popup-input-wrap">',b+='       <div class="popup-msg">',b+='         <div class="popup-msg-icon left-float">',b+='           <img src="../../images/popup/ico_caution.png" alt="실패">',b+="         </div>",b+='         <div class="left-float">‘'+a+"’ 페이지를 삭제하시겠습니까?</div>",b+="       </div>",b+="     </div>",b+="   </div>",b+=" </div>",b+=' <div class="popup-bottom">',b+='   <div class="right-float">',b+='     <button type="button" class="btn-stroke-orange left-float left js-btn-del-page">삭제</button>',b+='     <button type="button" class="btn-stroke-dark left-float left js-close-popup">취소</button>',b+="   </div>",b+=" </div>",b+="</section>"},tabItem=function(a){var b='<li class="tab-item js-tab current">';return b+='<div class="tab-item-title">'+a+"</div>",b+='<button type="button" class="btn-del js-del">delete</button>',b+="</li>"},pageItem=function(){var a='<section class="contents-section stats-monitoring current">';return a+='<div class="contents-section-inner stats-monitoring fill-gray">',a+='<ul class="container-list">',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+='<li class="container-item"></li>',a+="</ul>",a+='<ul class="graph-list">',a+="</ul>",a+="</div>",a+="</section>"},ResizeDiv=function(a,b,c){var d=$(window).outerHeight()-HEADER_HEIGHT,e=b.height(),f=$(window).outerHeight()-HEADER_HEIGHT,g=$(window).outerHeight()-HEADER_HEIGHT,h=0,i=100,j=d-(i+44);b.css({height:d/2-23}),c.css({height:d/2-23});var k=function(a){return g=f,f=a,h=g-f},l=function(){j=d-(i+44),d=$(window).outerHeight()-HEADER_HEIGHT,245>d&&(d=245),$(".main-content .wrapper.fix-height").css({height:d});var a=k(d);i>e?e=i:e>j?e=j:e-=a/2,b.css({height:e});var f=b.outerHeight(),g=d-f-24;c.css({height:g}),b.resizable({maxHeight:j})};b.resizable({handles:"s",minHeight:i,maxHeight:j,resize:function(){var a=b.outerHeight(),e=d-a-24;c.css({height:e})},stop:function(a,b){$(".ui-resizable-handle").trigger("mouseup"),e=b.size.height}}),this.resizeDivFitWin=function(){l()}},FoldTree=function(){this.foldAction=function(a,b,c,d){d?"false"==b.data("select")?(a.attr("data-select","selected").addClass("is-select").siblings().attr("data-select","selected").addClass("is-select"),b.data("select","true")):(a.removeAttr("data-select").removeClass("is-select").siblings().removeAttr("data-select").removeClass("is-select"),b.data("select","false")):"true"==b.data("fold")?(a.addClass("unfold").siblings().addClass("unfold"),b.data("fold","false").next(".tree-depth").addClass("unfold")):(a.removeClass("unfold").siblings().removeClass("unfold"),b.data("fold","true").next(".tree-depth").removeClass("unfold"))}},ResizeDashboardList=function(a,b){var c=628,d=$(window).outerHeight()-HEADER_HEIGHT,e=d-c;b.data("expand","false"),a.css({height:e});var f=function(){d=$(window).outerHeight()-HEADER_HEIGHT,DASHBOARD_MIN_HEIGHT>d&&(d=DASHBOARD_MIN_HEIGHT),a.css({height:d-22}),b.data("expand","true")},g=function(){d=$(window).outerHeight()-HEADER_HEIGHT,e=d-c,a.css({height:e}),b.data("expand","false")},h=function(){"false"==b.data("expand")?g():f()};this.resizeDashboardListFitWin=function(){h()},this.expandDashboardListHeight=function(){b.addClass("expand"),f()},this.reduceDashboardListHeight=function(){b.removeClass("expand"),g()}},initTab=function(a){var b=a.find(".js-tab-link"),c=a.find(".js-tab-cont");return 0==b.length?!1:(b.each(function(){$(this).data("target",$(this).attr("href"))}),void b.on("click",function(a){b.removeClass("on"),c.removeClass("on"),$(this).addClass("on"),$($(this).data("target")).addClass("on"),a.preventDefault()}))},initPie=function(a,b){new Chartist.Pie(a,{series:[b,100-b]},{startAngle:0,total:100,showLabel:!1})},smTab=function(){var a="",b=function(){$("body").append(popAdd()),$(".js-page-title").focus()},c=function(a){var b=a.prev(".tab-item-title").text();$("body").append(popDelete(b))},d=function(a){$("body").append(popAlert(a))},e=function(a,b){var c=a.find(".tab-item").length;return"add"==b?10>c:c>0},f=function(){var a=$(".tab-item"),b=$(".contents-section.stats-monitoring");a.hasClass("current")||(a.eq(0).addClass("current"),b.eq(1).addClass("current"))};this.showPopup=function(f,g,h){"add"==g?e(f,g)?b():d("페이지는 10개까지 추가 할 수 있습니다."):e(f,g)?(a=h,c(h)):d("삭제할 페이지가 없습니다.")},this.addPage=function(a,b,c){a.find(".tab-item").removeClass("current"),c.find(".contents-section.stats-monitoring").removeClass("current"),a.append(tabItem(b)),c.append(pageItem()),$(".dimmed").remove(),$(".popup").remove(),$(window).trigger("addPage")},this.delPage=function(){var b=$(".tab-item"),c=$(".contents-section.stats-monitoring"),d=a.parents(".tab-item"),e=b.index(d)+1;d.remove(),c.eq(e).remove(),$(".dimmed").remove(),$(".popup").remove(),f()},this.active=function(a){var b=$(".tab-item").index(a)+1;a.addClass("current").siblings().removeClass("current"),$(".contents-section.stats-monitoring").eq(b).addClass("current").siblings().removeClass("current")},this.tabMove=function(a,b,c,d){"prev"==a&&d>0?(b.eq(d).insertBefore(b.eq(d-1)),c.eq(d+1).insertBefore(c.eq(d))):"next"==a&&d<b.length&&(b.eq(d).insertAfter(b.eq(d+1)),c.eq(d+1).insertAfter(c.eq(d+2)))}},ResizeContainer=function(a){var b=function(){var b=$(window).outerHeight()-HEADER_HEIGHT;a.css({height:(b-68)/4})};b(),this.resizeContainerFitWin=function(){b()}},ResizeGraph=function(){var a=function(){var a=$(window).outerHeight()-HEADER_HEIGHT;$(".graph-item").css({height:(a-68)/4}),$(".graph-item.m1x1").css({height:(a-68)/4}),$(".graph-item.m1x2").css({height:(a-68)/4*2+6}),$(".graph-item.m2x1").css({height:(a-68)/4}),$(".graph-item.m2x2").css({height:(a-68)/4*2+6}),$(".graph-item.m1x3").css({height:(a-68)/4*3+12}),$(".graph-item.m3x1").css({height:(a-68)/4}),$(".graph-item.m2x3").css({height:(a-68)/4*3+12}),$(".graph-item.m3x2").css({height:(a-68)/4*2+6}),$(".graph-item.m3x3").css({height:(a-68)/4*3+12}),$(".graph-item.m1x4").css({height:(a-68)/4*4+18}),$(".graph-item.m4x1").css({height:(a-68)/4}),$(".graph-item.m2x4").css({height:(a-68)/4*4+18}),$(".graph-item.m4x2").css({height:(a-68)/4*2+6}),$(".graph-item.m3x4").css({height:(a-68)/4*4+18}),$(".graph-item.m4x3").css({height:(a-68)/4*3+12}),$(".graph-item.m4x4").css({height:(a-68)/4*4+18})},b=function(){$(".graph-item").each(function(){var a=4*$(this).attr("data-floor"),b=$(".container-item").eq(0).offset().top,c=$(".container-item").eq(a).offset().top-b;console.log(c),$(this).css({top:c})})};a(),this.resizeGraphContainer=function(){a(),b()}},Graph=function(){var a,b=function(a,b){var c=a.top-b.top,d=a.left-b.left,e=$(".graph-item");e.eq(e.length-1).draggable({snap:".container-item",snapMode:"inner"}).css({position:"absolute",top:c,left:d,background:"red"}),$(".container-item").droppable()};this.showPopup=function(b){a=b,$.get("mp7-1_add_graph_test.html ",function(b){$("body").append(b),$(".select").selectric(),$(".spinner").spinner();var c=$(".container-item").index(a);$(".stats-map-item-state").eq(c).addClass("active")})},this.addGraph=function(){console.log(a);var c,d=$(".container-item"),e=d.index(a),f=d.eq(0).offset(),g=a.offset(),h=$('<div class="graph-item"></div>');0>e-4?c=0:4>e-4?c=1:8>e-4?c=2:12>e-4&&(c=3),h.attr("data-floor",c).appendTo(".graph-list"),b(g,f),$(".dimmed").remove(),$(".popup").remove(),$(window).trigger("addGraph")}};navigator.userAgent.indexOf("Safari")>0?$("html").addClass(navigator.userAgent.indexOf("Chrome")>0?"chrome":"Safari"):navigator.userAgent.indexOf("Firefox")>0?$("html").addClass("firefox"):navigator.userAgent.indexOf("Trident/7.0")>0?$("html").addClass("ie11"):navigator.userAgent.indexOf("MSIE 10.0")>0&&$("html").addClass("ie10"),$(function(){!function(){var a=$(window).outerHeight()-HEADER_HEIGHT;$(".main-content .wrapper.fix-height").css({height:a})}(),function(){$(".header-user-path").data("open","false").on("click",function(a){a.preventDefault(),"false"==$(this).data("open")?$(this).data("open","true").addClass("on").next().addClass("on"):$(this).data("open","false").removeClass("on").next().removeClass("on")})}(),$(".select").selectric(),$(".spinner").spinner(),function(){var a=$(".tree-item");a.data({fold:"true",select:"false"});var b=new FoldTree;$(document).on("click",".js-fold",function(a){a.preventDefault();var c=$(this).parent(".tree-item"),d=c.parent(".tree-list"),e=d.hasClass("no-children");b.foldAction($(this),c,d,e)})}(),function(){$(".js-cal-start, .js-cal-end").datepicker({dateFormat:"yy-mm-dd",beforeShowDay:function(a){var b="";return 6==a.getDay()&&(b="ui-datepicker-sat"),0==a.getDay()&&(b="ui-datepicker-sun"),[!0,b]}}),$(".js-btn-cal-start").on("click",function(){$(".js-cal-start").datepicker("show")}),$(".js-btn-cal-end").on("click",function(){$(".js-cal-end").datepicker("show")})}(),function(){var a=$("body"),b=new Graph;a.on("click",".container-item",function(){b.showPopup($(this))}),a.on("click",".js-btn-add-graph",function(){b.addGraph()})}(),function(){var a=$(".sm-tab .tab-list"),b=$(".wrapper.monitoring"),c=new smTab,d=$("body");d.on("click",".js-add",function(){c.showPopup(a,"add")}),d.on("click",".js-del",function(){c.showPopup(a,"del",$(this))}),d.on("click",".js-btn-add-page",function(){var d=$(".js-page-title").val();c.addPage(a,d,b)}),d.on("click",".js-btn-del-page",function(){c.delPage()}),d.on("click",".js-tab",function(){c.active($(this))}),$(".btn-move-prev").on("click",function(){var a=$(".tab-item"),b=$(".contents-section.stats-monitoring"),d=a.index($(".tab-item.current"));c.tabMove("prev",a,b,d)}),$(".btn-move-next").on("click",function(){var a=$(".tab-item"),b=$(".contents-section.stats-monitoring"),d=a.index($(".tab-item.current"));c.tabMove("next",a,b,d)})}(),function(){var a,b=new ResizeContainer($(".container-item"));$(window).on("addPage addGraph",function(){b=new ResizeContainer($(".container-item")),a=new ResizeGraph($(".graph-item"))}),$(window).on("resize",function(){b.resizeContainerFitWin(),a.resizeGraphContainer()})}(),function(){var a=$(".js-expand"),b=new ResizeDashboardList($(".dashboard-list"),a);$(window).on("resize",function(){b.resizeDashboardListFitWin()}),a.on("click",function(){"false"==$(this).data("expand")?b.expandDashboardListHeight():b.reduceDashboardListHeight()})}(),function(){initTab($(".dashboard-list")),initTab($(".dbpopup"))}(),function(){$(".js-open-vnf-manager").on("click",function(a){$(".js-vnf-manager-popup").addClass("on"),a.preventDefault()}),$(".js-open-vim").on("click",function(a){$(".js-vim-popup").addClass("on"),a.preventDefault()}),$(".js-open-nfvi").on("click",function(a){$(".js-nfvi-popup").addClass("on"),a.preventDefault()}),$(".js-open-vnf-instance").on("click",function(a){$(".js-vnf-instance-popup").addClass("on"),a.preventDefault()}),$(".dbpopup-close").on("click",function(a){$(".dbpopup").removeClass("on"),a.preventDefault()})}(),function(){$(".js-pie-chart").each(function(){var a=$(this).find(".dbpopup-circle-chart-bar")[0],b=parseInt($(this).find(".dbpopup-circle-chart-text").text(),10);initPie(a,b)})}(),function(){initTab($(".state-list"))}(),function(){var a=$(".wrapper.fix-height"),b=new ResizeDiv(a,$(".stats-resizable.narrow.top"),$(".stats-resizable.narrow.bottom")),c=new ResizeDiv(a,$(".stats-resizable.wide.top"),$(".stats-resizable.wide.bottom"));$(window).on("resize",function(){b.resizeDivFitWin(),c.resizeDivFitWin()}),$(".ui-resizable-handle").on({mousedown:function(){$(window).unbind("resize")},mouseup:function(){$(window).bind("resize",b.resizeDivFitWin),$(window).bind("resize",c.resizeDivFitWin)}})}(),function(){$(".chart-view").data("select","false").on("click",function(a){a.preventDefault(),"false"==$(this).data("select")?$(this).addClass("on").data("select","true"):$(this).removeClass("on").data("select","false")})}(),function(){$(".js-pie-chart").each(function(){var a=$(this).find(".vim-circle-chart-bar")[0],b=parseInt($(this).find(".vim-circle-chart-text").text(),10);initPie(a,b)})}(),function(){$("body").on("click",".js-open-popup",function(a){$(".dimmed").addClass("on"),$(".popup").addClass("on"),a.preventDefault()}),$("body").on("click",".js-close-popup",function(a){$(".dimmed").remove(),$(".popup").remove(),a.preventDefault()}),$("body").on("click",".js-close-alert",function(a){$(".dimmed").remove(),$(".popup").remove(),a.preventDefault()}),$("body").on("click",".js-confirm-ok",function(a){$(".dimmed").remove(),$(".popup").remove(),a.preventDefault()}),$("body").on("click",".js-confirm-cancel",function(a){$(".dimmed").remove(),$(".popup").remove(),a.preventDefault()})}()});